!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.download=t()}(this,function(){return function(e,t,n){function o(e){return String(e)}var a=window,r="application/octet-stream",i=n||r,d=e,e=!t&&!n&&d,c=document.createElement("a"),l=a.Blob||a.MozBlob||a.WebKitBlob||o,s=t||"download",l=l.call?l.bind(a):Blob;if("true"===String(this)&&(i=(d=[d,i])[0],d=d[1]),e&&e.length<2048){var f,s=e.split("/").pop().split("?")[0];if(c.href=e,-1!==c.href.indexOf(e))return(f=new XMLHttpRequest).open("GET",e,!0),f.responseType="blob",f.onload=function(e){u(e.target.response,s,r)},setTimeout(function(){f.send()},0),f}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(d)){if(!(2096103.424<d.length&&l!==o))return navigator.msSaveBlob?navigator.msSaveBlob(p(d),s):m(d);i=(d=p(d)).type||r}function p(e){for(var t=(e=e.split(/[:;,]/))[1],n=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),o=n.length,a=0,r=new Uint8Array(o);a<o;++a)r[a]=n.charCodeAt(a);return new l([r],{type:t})}function m(e,t){if("download"in c)return c.href=e,c.setAttribute("download",s),c.className="download-js-link",c.innerHTML="downloading...",c.style.display="none",document.body.appendChild(c),setTimeout(function(){c.click(),document.body.removeChild(c),!0===t&&setTimeout(function(){a.URL.revokeObjectURL(c.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return e=e.replace(/^data:([\w\/\-\+]+)/,r),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),t||(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,r)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(n=d instanceof l?d:new l([d],{type:i}),navigator.msSaveBlob)return navigator.msSaveBlob(n,s);if(a.URL)m(a.URL.createObjectURL(n),!0);else{if("string"==typeof n||n.constructor===o)try{return m("data:"+i+";base64,"+a.btoa(n))}catch(d){return m("data:"+i+","+encodeURIComponent(n))}(t=new FileReader).onload=function(e){m(this.result)},t.readAsDataURL(n)}return!0}});