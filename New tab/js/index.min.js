!function(){"use strict";var e,t,l,n,r,i,o,a=document.querySelector(".search_icon"),c=document.getElementById("word"),s=document.querySelector(".result_box_list"),d=document.getElementById("aujvnk"),f=document.getElementById("Dock"),k=Trick.get("temp"),u=!1,g=Trick.get("search"),b=(g&&(a.setAttribute("src",g.src),a.setAttribute("alt",g.alt)),new Dexie("USER")),v=(b.version(1).stores({item_list:"++id",wallpaper:"++id"}),!1),w=!1;var m=document.querySelectorAll(".ctqv");for(let e=0;e<m.length;e++)m[e].onclick=function(){a.setAttribute("src",this.getElementsByTagName("img")[0].getAttribute("src")),a.setAttribute("alt",this.getElementsByTagName("img")[0].getAttribute("alt")),s.style.height=0,u=!1,Trick.set("search",{src:a.getAttribute("src"),alt:a.getAttribute("alt"),time:Trick.time(),id:Trick.casually(32)})};c.onkeydown=function(e){""==this.value&&" "==this.value&&null==this.value||13==e.keyCode&&(window.open(a.getAttribute("alt")+this.value),this.value="")},a.onclick=function(){u=u?(s.style.height=0,!1):(s.style.height="340px",!0)},g=document.getElementById("dgukspegckds"),c=document.getElementById("uploadfile"),e=document.getElementById("drvmcc"),g.onclick=e=>{document.querySelector(".upload").style.top="50%"},c.onchange=function(){var t={id:Trick.casually(32),time:Trick.time()},e=this.files[0].type.split("/")[0],i=(t.type=e,new FileReader);"image"==e?(b.wallpaper.clear(),i.readAsDataURL(this.files[0]),i.onload=e=>{t.src=i.result,Trick.set("wallpaper_id",t.id),b.wallpaper.add(t),d.style.backgroundImage=`url('${window.URL.createObjectURL(Trick.Base64ToBlob(i.result))}')`}):alert("请上传后缀(jpg,png,jpeg)的图片")},document.getElementById("donwload").onclick=e=>{Trick.downloadfile(d.getAttribute("src"),Trick.time()+".png","img")},e.onchange=function(){var e=new FileReader;e.readAsText(this.files[0],"UTF-8"),e.onload=e=>{e=JSON.parse(e.target.result);if("cpaggi"==e.id){var t=[];for(const i of e.data)b.item_list.add(i),t.push(i.id);Trick.set("temp",t)}else{e=e.data.site.sites||!1;if(!e)return!1}}},document.getElementById("zeerhf").onclick=e=>{b.open().then(e=>{e.table("item_list").toArray().then(e=>{var e={id:"cpaggi",time:Trick.timeShift(Trick.time()),name:"New tab",data:e,temp:Trick.get("temp")},t=document.createElement("a");t.download=`Dock栏备份-${e.time}.json`,t.style.display="none",t.href=URL.createObjectURL(new Blob([JSON.stringify(e)])),document.body.appendChild(t),t.click(),document.body.removeChild(t)})}).catch(e=>{alert("请添加书签后再次备份!")})},t=document.querySelector("body > div.upload.center"),l=document.querySelector("body > div.upload.center > div.wxu-itl > label > img"),n=Trick.get("temp")?Trick.get("temp"):[],r=!1,i=new FileReader,o={},document.getElementById("demoasd").onchange=function(){"image"==this.files[0].type.split("/")[0]?(i.readAsDataURL(this.files[0]),i.onload=e=>{o.src=e.target.result,l.setAttribute("src",window.URL.createObjectURL(Trick.Base64ToBlob(e.target.result))),r=!0}):alert("请上传后缀(jpg,png,jpeg,svg,ico)的图片")},document.getElementById("rgcdlg").onclick=e=>{var t=document.getElementById("ukzieu"),i=document.getElementById("otjkkr");0<t.value.length&&i.value.match(/(\w+):\/\/([^/:]+)(:\d*)?/gi)?(o.id=Trick.casually(32),o.name=t.value,o.url=i.value,axios.get("https://api.infinitynewtab.com/v2/icon/get_logo_list",{params:{host:i.value.match(/(\w+):\/\/([^/:]+)(:\d*)?/gi)[0].split("/").pop(),limit:2}}).then(e=>{0<e.data.data.length?o.src=o.src||e.data.data[0].src:r?o.src=o.src:o.base_ico=Trick.chart(o.name.split("")[0]),b.item_list.add(o),n.push(o.id),Trick.set("temp",n),t.value="",i.value="",l.setAttribute("src","./img/006APoFYjw1f8m1kkf7deg3046044441.gif"),r=!(o={})}).catch(e=>{alert(!1)})):alert("怎么会有怎么无聊的人啊！")},document.querySelector("body > div.upload.center > div.mac > span:nth-child(3)").onclick=e=>{t.style.top="-"+t.offsetHeight+"px"},document.querySelector("body > div.upload.center > div.wxu-itl > div > div.srtdgb > button:nth-child(1)").onclick=e=>{t.style.top="-"+t.offsetHeight+"px"},async function(){k&&b.open().then(e=>{e.table("item_list").toArray().then(i=>{var l=[];for(let t=0;t<k.length;t++)for(let e=0;e<k.length;e++)k[t]==i[e].id&&l.push(i[e]);for(let e=0;e<l.length;e++)f.innerHTML+=`
                            <li class="icons" draggable="true" id="${l[e].id}" url="${l[e].url}" index="${e}">
                                <span>${l[e].name}</span>
                                <img src="${l[e].src||window.URL.createObjectURL(Trick.Base64ToBlob(l[e].base_ico))}">
                            </li>
                        `;var n=99,e=document.getElementById("Dock"),r=e.getElementsByTagName("li"),o=e.getElementsByTagName("img"),a=e.getElementsByTagName("span"),c=document.querySelector(".dock-bg"),s=[],d=0,u=n<=128?16<o.length?800:700:n<=300?1500:n<=523?2700:4700,g=!1;for(d=0;d<o.length;d++){s.push(n);var m=parseInt(n/2);o[d].style.width=m+"px",o[d].style.height=m+"px",o[d].style.borderRadius=(n<=32?10:m/3)+"px"}function p(){var t=0;for(let e=0;e<o.length;e++)t+=o[e].offsetWidth-6;c.style.width=t+"px",g||(g=!0,c.style.height=o[0].offsetHeight+"px")}e.onmousemove=function(e){e=e||window.event;for(d=0;d<o.length;d++){var t=e.clientX-o[d].offsetLeft-r[d].offsetWidth/1.8,i=e.clientY-o[d].offsetTop-this.offsetTop-o[d].offsetHeight/2,t=1-Math.sqrt(t*t+i*i)/u,i=(t<.5&&(t=.5),s[d]*t);o[d].style.width=i+"px",o[d].style.height=i+"px",o[d].style.borderRadius=i/4+"px",a[d].style.top="-"+1.4*i+"px"}p()},e.onmouseleave=function(){for(v=!1,d=0;d<o.length;d++)o[d].style.width=s[d]/2+"px",o[d].style.height=s[d]/2+"px",o[d].style.borderRadius=(n<=32?10:m/3)+"px";if(p(),w){var e=[];for(const t of r)e.push(t.id);Trick.set("temp",e),w=!1}},p(),new Sortable(e,{animation:300,onEnd:function(e){w=!0}});var t=document.getElementById("Dock"),h=t.getElementsByTagName("li");for(let e=0;e<h.length;e++)h[e].oncontextmenu=function(e){e.preventDefault(),v&&(t.removeChild(this),b.item_list.delete(this.id),Trick.delete("temp",this.id))};document.onkeydown=e=>{46==e.keyCode&&(v=!0)};var y=document.querySelectorAll(".dock li");for(let e=0;e<y.length;e++)y[e].onclick=function(){null!=this.getAttribute("url")&&window.open(this.getAttribute("url"))}})}),Trick.get("wallpaper_id")&&b.wallpaper.get(Trick.get("wallpaper_id")).then(e=>{e=window.URL.createObjectURL(Trick.Base64ToBlob(e.src));d.style.backgroundImage=`url('${e}')`,d.setAttribute("src",e)})}()}();